<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Movies</title>
</head>
<style>
  #movie-list-container {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
  }

  #movie-list-container .movie-item{
    border: 1px solid #ccc;
    border-radius: 4px;
    padding: 8px;
    text-align: center;
  }
</style>
<body>
  <h1>Peliculas Populares</h1>

  <div id="movie-list-container"></div>
</body>
<script>
  const apiKey = "d51433c51d022a719c579e6a7078c660";
  const apiUrl = `https://api.themoviedb.org/3/movie/popular?api_key=${apiKey}&language=es-ES&page=1`;
  const imgUrl = "https://image.tmdb.org/t/p/w185";

  async function fetchMovies() {
    try {
      const response = await fetch(apiUrl);
      const data = await response.json();

      const results = data.results;
      const listContainer = document.getElementById('movie-list-container');

      results.forEach(movie => {
        const gridItem = document.createElement('div');
        gridItem.classList.add('movie-item');
        const itemImg = document.createElement('img');
        const itemTitle = document.createElement('h4');
        const itemYear = document.createElement('h6');

        const year = movie.release_date.split('-')[0];
        itemTitle.innerText = movie.title;
        itemYear.innerText = year;
        itemImg.src = `${imgUrl}${movie.poster_path}`;

        gridItem.appendChild(itemImg);
        gridItem.appendChild(itemTitle);
        gridItem.appendChild(itemYear);
        listContainer.appendChild(gridItem);
      });
    } catch (error) {
      console.error('Error fetching data:', error);
    }
  }

  fetchMovies();
</script>
</html>